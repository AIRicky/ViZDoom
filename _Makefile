all: python_api mainExample controllerExample viziazdoom

python_api: vizia.so
vizia.so: ViziaPythonWrapper.cpp ViziaDoomGamePython.o ViziaDoomGame.o ViziaDoomController.o ViziaDoomGamePython.h
	g++ -Wall -fPIC -shared -Wl,-soname,vizia.so -o vizia.so ViziaPythonWrapper.cpp ViziaDoomGamePython.o ViziaDoomGame.o ViziaDoomController.o -lpython2.7 -lboost_python -I . -I /usr/include/python2.7 -lrt -lpthread  -L/usr/local/lib -lboost_system -lboost_thread 

ViziaDoomGamePython.o:  ViziaDoomGamePython.cpp ViziaDoomGamePython.h ViziaDoomGame.h ViziaDefines.h
	g++ -Wall -fPIC -I . -I /usr/include/python2.7 -c -fPIC ViziaDoomGamePython.cpp  -lrt -lpthread  -L/usr/local/lib -lboost_system -lboost_thread -lboost_python -lpython2.7

gameExample: ViziaDoomGameExample.cpp ViziaDoomGame.o ViziaDoomController.o ViziaDoomGame.h   
	g++ -Wall -I . ViziaDoomGameExample.cpp ViziaDoomGame.o  ViziaDoomController.o -o mainExample -lrt -lpthread -L/usr/local/lib -lboost_system -lboost_thread
	
ViziaDoomGame.o: ViziaDoomGame.cpp ViziaDoomGame.h ViziaDoomController.h  ViziaDefines.h
	g++ -Wall -fPIC -I . -c  ViziaDoomGame.cpp -lrt -lpthread -L/usr/local/lib -lboost_system -lboost_thread

controllerExample:  ViziaDoomControllerExample.cpp  ViziaDoomController.h  ViziaDefines.h ViziaDoomController.o
	g++ -Wall -I . -o controllerExample ViziaDoomController.o ViziaDoomControllerExample.cpp  -lrt -lpthread -L/usr/local/lib -lboost_system -lboost_thread -lSDL2
ViziaDoomController.o: ViziaDoomController.cpp ViziaDoomController.h ViziaDefines.h boost/process.hpp
	g++ -Wall -fPIC -I . -c ViziaDoomController.cpp -lrt -lpthread -L/usr/local/lib -lboost_system -lboost_thread -lSDL2

clean:
	rm -rf *.o vizia.so
